 <@h.head title="角色管理 | spinach"/> <@h.menu home="s" firMenu="系统管理"
secMenu="角色管理"/>
<div class="page-content">
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
				<h3 class="page-title">角色管理</h3>
				<ul class="breadcrumb">
					<li><i class="icon-home"></i> <a href="${path}/index">首页</a> <i
						class="icon-angle-right"></i></li>
					<li><a href="#">系统管理</a> <i class="icon-angle-right"></i></li>
					<li><a href="${path}/user/list">角色管理</a></li>
				</ul>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span12">
				<div class="portlet box purple">
					<@h.tools title="角色管理"/>
					<div class="portlet-body form">
						<!-- BEGIN FORM-->
						<form action="${path}/role/save" id="fm" class="form-horizontal"
							method="post">
							<input type="hidden" id="id" value="${id!0}" name="id">
							<div class="alert alert-error hide" id="errorMsg">
								<button class="close" data-dismiss="alert"></button>
								You have some form errors. Please check below.
							</div>
							<div class="control-group">
								<label class="control-label">角色名<span class="required">*</span></label>
								<div class="controls">
									<input type="text" name="name"
										class="span6 m-wrap disabled Validform_error" datatype="*"
										nullmsg="请输入角色名！" /> <span class="Validform_checktip">请输入角色名！</span>
								</div>
							</div>
							<div class="control-group">
								<label class="control-label">角色编码<span class="required">*</span></label>
								<div class="controls">

									<input name="roleCode" type="text" class="span6 m-wrap"
										datatype="*" nullmsg="请输入角色编码！" /> <span
										class="Validform_checktip">请输入角色编码</span>
								</div>
							</div>
							<div class="control-group">

								<label class="control-label">角色描述</label>
								<div class="controls">
									<input name="description" type="text" class="span6 m-wrap" />
								</div>
							</div>
							<div class="control-group">
								<label class="control-label">排序</label>
								<div class="controls">
									<input name="sort" type="text" class="span6 m-wrap"
										 />
								</div>
							</div>
							<div class="control-group">
								<label class="control-label">是否启用</label>
								<div class="controls ">
									<select class="span6 m-wrap" name="disabled">
										<option value="0">启用</option>
										<option value="1">禁用</option>
									</select>
								</div>
							</div>
							<div class="form-actions">
								<button type="submit" class="btn purple">保存</button>
								<button type="button" onclick="history.go(-1)" class="btn">取消</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
<@h.foot />
<script type="text/javascript">
	$(function() {
		if ($("#id").val() != 0) {
			$.get("${path}/role/getById/" + $("#id").val(), function(data) {
				var data = eval('(' + data + ')');
				$("#fm").jsonData(data.data);
				$(".disabled").attr("readOnly", "readOnly");
			})
		}
	});
	var callback = function(data) {
		if (data.status == "0") {
			window.location.href = "${path}/role/list";
		} else {
			$("#errorMsg").html(data.msg).show();
		}
	}
	$("#fm").validFrom(callback);
</script>
</body>
</html>